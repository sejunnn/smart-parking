<!DOCTYPE html>

<html>
<head>
<meta content="width=device-width, initial-scale=1" name="viewport"/>
<meta charset="utf-8"/>
<link href="globals.css" rel="stylesheet"/>
<link href="style.css" rel="stylesheet"/>
</head>
<body>
<div class="screen">
<div class="div">
<div class="overlap">
<div class="text-wrapper">구역1</div>
<div class="text-wrapper-2">충전중</div>
<div class="text-wrapper-3">53분 경과</div>
<div class="text-wrapper-4">87% 진행중</div>
<img class="vector" src="img/charging.svg"/>
</div>
<div class="overlap-group">
<div class="text-wrapper-5">구역2</div>
<div class="text-wrapper-6">충전가능</div>
<div class="text-wrapper-7">12시간 전 사용</div>
<img class="img" src="img/ok.svg"/>
</div>
<div class="text-wrapper-8">오늘 18:43 기준</div>
<div class="text-wrapper-9">실시간 충전현황</div>
<div class="overlap-2">
<div class="text-wrapper-10">구역3</div>
<div class="text-wrapper-11">충전가능</div>
<div class="text-wrapper-12">6시간 전 사용</div>
<img class="vector-2" src="img/ok.svg"/>
</div>
<div class="overlap-3">
<div class="text-wrapper-13">구역4</div>
<div class="text-wrapper-14">대기중</div>
<div class="text-wrapper-15">...</div>
<div class="text-wrapper-16">이 구역에 차량이 <br/>인식되었습니다.</div>
</div>
<div class="text-wrapper-17">한양 전기차 충전소</div>
<img class="vector-3" src="img/image.svg"/>
</div>
</div>
<script>
async function fetchStatus() {
  try {
    const response = await fetch('status.json');
    const data = await response.json();

    data.zones.forEach((zone) => {
      const zoneNum = zone.zone;
      const statusText = zone.status;
      const battery = zone.battery;

      document.getElementById(`zone${zoneNum}-status`).innerText = statusText;
      document.getElementById(`zone${zoneNum}-battery`).innerText = battery + '% 진행중';

      const img = document.getElementById(`zone${zoneNum}-icon`);
      if (statusText === "충전중") {
        img.src = "img/charging.svg";
      } else if (statusText === "충전가능") {
        img.src = "img/ok.svg";
      } else {
        img.src = "img/image.svg";
        img.onclick = () => window.location.reload();
      }
    });

  } catch (e) {
    console.error("JSON 로드 실패:", e);
  }
}
fetchStatus();
setInterval(fetchStatus, 5000);
</script></body>
</html>
